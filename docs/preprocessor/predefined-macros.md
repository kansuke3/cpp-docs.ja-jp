---
title: 定義済みマクロ
description: Microsoft C++ コンパイラの定義済みプリプロセッサ マクロを一覧にして説明します。
ms.custom: update_every_version
ms.date: 12/14/2020
f1_keywords:
- _ATL_VER
- __ATOM__
- __AVX__
- __AVX2__
- __AVX512BW__
- __AVX512CD__
- __AVX512DQ__
- __AVX512F__
- __AVX512VL__
- _CHAR_UNSIGNED
- __CLR_VER
- _CONTROL_FLOW_GUARD
- __COUNTER__
- __cplusplus
- __cplusplus_cli
- __cplusplus_winrt
- _CPPRTTI
- _CPPUNWIND
- __DATE__
- _DEBUG
- _DLL
- __FILE__
- __FUNCDNAME__
- __FUNCSIG__
- __FUNCTION__
- _INTEGRAL_MAX_BITS
- _ISO_VOLATILE
- _KERNEL_MODE
- __LINE__
- _M_AMD64
- _M_ARM
- _M_ARM_ARMV7VE
- _M_ARM_FP
- _M_ARM64
- _M_CEE
- _M_CEE_PURE
- _M_CEE_SAFE
- _M_FP_EXCEPT
- _M_FP_FAST
- _M_FP_PRECISE
- _M_FP_STRICT
- _M_IX86
- _M_IX86_FP
- _M_X64
- _MANAGED
- _MFC_VER
- _MSC_BUILD
- _MSC_EXTENSIONS
- _MSC_FULL_VER
- _MSC_VER
- _MSVC_LANG
- __MSVC_RUNTIME_CHECKS
- _MT
- _NATIVE_WCHAR_T_DEFINED
- _NO_SIZED_DEALLOCATION
- _OPENMP
- _PREFAST_
- _RESUMABLE_FUNCTIONS_SUPPORTED
- _RTC_CONVERSION_CHECKS_ENABLED
- __STDC__
- __STDC_HOSTED__
- __STDC_NO_ATOMICS__
- __STDC_NO_COMPLEX__
- __STDC_NO_THREADS__
- __STDC_NO_VLA__
- __STDC_VERSION__
- __STDCPP_THREADS__
- __TIME__
- __TIMESTAMP__
- __VA_ARGS__
- _VC_NODEFAULTLIB
- _WCHAR_T_DEFINED
- _WIN32
- _WIN64
- _WINRT_DLL
helpviewer_keywords:
- timestamps, preprocessor macro
- cl.exe compiler, version number
- version numbers, C/C++ compiler (cl.exe)
- macros, predefined C++
- preprocessor, macros
- predefined macros
- _ATL_VER macro
- __ATOM__ macro
- __AVX__ macro
- __AVX2__ macro
- __AVX512BW__ macro
- __AVX512CD__ macro
- __AVX512DQ__ macro
- __AVX512F__ macro
- __AVX512VL__ macro
- _CHAR_UNSIGNED macro
- __CLR_VER macro
- _CONTROL_FLOW_GUARD macro
- __COUNTER__ macro
- __cplusplus macro
- __cplusplus_cli macro
- __cplusplus_winrt macro
- _CPPRTTI macro
- _CPPUNWIND macro
- __DATE__ macro
- _DEBUG macro
- _DLL macro
- __FILE__ macro
- __FUNCDNAME__ macro
- __FUNCSIG__ macro
- __FUNCTION__ macro
- _INTEGRAL_MAX_BITS macro
- _ISO_VOLATILE macro
- _KERNEL_MODE macro
- __LINE__ macro
- _M_AMD64 macro
- _M_ARM macro
- _M_ARM_ARMV7VE macro
- _M_ARM_FP macro
- _M_ARM64 macro
- _M_CEE macro
- _M_CEE_PURE macro
- _M_CEE_SAFE macro
- _M_FP_EXCEPT macro
- _M_FP_FAST macro
- _M_FP_PRECISE macro
- _M_FP_STRICT macro
- _M_IX86 macro
- _M_IX86_FP macro
- _M_X64 macro
- _MANAGED macro
- _MFC_VER macro
- _MSC_BUILD macro
- _MSC_EXTENSIONS macro
- _MSC_FULL_VER macro
- _MSC_VER macro
- _MSVC_LANG macro
- __MSVC_RUNTIME_CHECKS macro
- _MT macro
- _NATIVE_WCHAR_T_DEFINED macro
- _NO_SIZED_DEALLOCATION macro
- _OPENMP macro
- _PREFAST_ macro
- _RESUMABLE_FUNCTIONS_SUPPORTED macro
- _RTC_CONVERSION_CHECKS_ENABLED macro
- __STDC__ macro
- __STDC_HOSTED__ macro
- __STDC_NO_ATOMICS__ macro
- __STDC_NO_COMPLEX__ macro
- __STDC_NO_THREADS__ macro
- __STDC_NO_VLA__ macro
- __STDC_VERSION__ macro
- __STDCPP_THREADS__ macro
- __TIME__ macro
- __TIMESTAMP__ macro
- __VA_ARGS__ macro
- _VC_NODEFAULTLIB macro
- _WCHAR_T_DEFINED macro
- _WIN32 macro
- _WIN64 macro
- _WINRT_DLL macro
- __func__ identifier
ms.assetid: 1cc5f70a-a225-469c-aed0-fe766238e23f
no-loc:
- _ATL_VER
- __ATOM__
- __AVX__
- __AVX2__
- __AVX512BW__
- __AVX512CD__
- __AVX512DQ__
- __AVX512F__
- __AVX512VL__
- _CHAR_UNSIGNED
- __CLR_VER
- _CONTROL_FLOW_GUARD
- __COUNTER__
- __cplusplus
- __cplusplus_cli
- __cplusplus_winrt
- _CPPRTTI
- _CPPUNWIND
- __DATE__
- _DEBUG
- _DLL
- __FILE__
- __FUNCDNAME__
- __FUNCSIG__
- __FUNCTION__
- _INTEGRAL_MAX_BITS
- _ISO_VOLATILE
- _KERNEL_MODE
- __LINE__
- _M_AMD64
- _M_ARM
- _M_ARM_ARMV7VE
- _M_ARM_FP
- _M_ARM64
- _M_CEE
- _M_CEE_PURE
- _M_CEE_SAFE
- _M_FP_EXCEPT
- _M_FP_FAST
- _M_FP_PRECISE
- _M_FP_STRICT
- _M_IX86
- _M_IX86_FP
- _M_X64
- _MANAGED
- _MFC_VER
- _MSC_BUILD
- _MSC_EXTENSIONS
- _MSC_FULL_VER
- _MSC_VER
- _MSVC_LANG
- __MSVC_RUNTIME_CHECKS
- _MT
- _NATIVE_WCHAR_T_DEFINED
- _NO_SIZED_DEALLOCATION
- _OPENMP
- _PREFAST_
- _RESUMABLE_FUNCTIONS_SUPPORTED
- _RTC_CONVERSION_CHECKS_ENABLED
- __STDC__
- __STDC_HOSTED__
- __STDC_NO_ATOMICS__
- __STDC_NO_COMPLEX__
- __STDC_NO_THREADS__
- __STDC_NO_VLA__
- __STDC_VERSION__
- __STDCPP_THREADS__
- __TIME__
- __TIMESTAMP__
- __VA_ARGS__
- _VC_NODEFAULTLIB
- _WCHAR_T_DEFINED
- _WIN32
- _WIN64
- _WINRT_DLL
- __func__
ms.openlocfilehash: 3e0dbda7ddcd7c428e0f83895d9ed5d4922a7ccb
ms.sourcegitcommit: bf6d8a220f6392f1f19c0c0605d1467d0221ef6c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/25/2021
ms.locfileid: "105551762"
---
# <a name="predefined-macros"></a>定義済みマクロ

Microsoft C/C++ コンパイラ (MSVC) では、言語 (C または C++)、コンパイル ターゲット、および選択されたコンパイラ オプションに応じて、特定のプリプロセッサ マクロが事前定義されます。

MSVC では、ANSI/ISO C99、C11、C17 標準および ISO C++14 と C++17 標準で必要とされる定義済みプリプロセッサ マクロがサポートされています。 実装では、さらにいくつかの Microsoft 固有のプリプロセッサ マクロもサポートされています。 一部のマクロは、特定のビルド環境またはコンパイラ オプションに対してのみ定義されます。 特に明記されていない限り、マクロは **`/D`** コンパイラ オプションの引数として指定されているかのように、翻訳単位全体で定義されます。 マクロは定義されている場合、プリプロセッサによってコンパイルの前に、指定された値に展開されます。 定義済みマクロは引数を取らず、再定義することはできません。

## <a name="standard-predefined-identifier"></a>標準の定義済み識別子

コンパイラでは、ISO C99 および ISO C++11 によって指定されているこの定義済み識別子がサポートされています。

- `__func__` 関数ローカルの **`char`** の **static const** 配列としての、外側の関数の非修飾かつ非装飾の名前。

    ```cpp
    void example(){
        printf("%s\n", __func__);
    } // prints "example"
    ```

## <a name="standard-predefined-macros"></a>標準の定義済みマクロ

コンパイラでは、ISO C99、C11、C17 および ISO C++17 標準によって指定されているこれらの定義済みマクロがサポートされています。

- `__cplusplus` 翻訳単位が C++ としてコンパイルされるときに、整数リテラル値として定義されます。 それ以外の場合は、定義されません。

- `__DATE__` 現在のソース ファイルのコンパイル日付。 日付は *Mmm dd yyyy* 形式の固定長の文字列リテラルです。 月の名前 *Mmm* は、C ランタイム ライブラリ (CRT) [asctime](../c-runtime-library/reference/asctime-wasctime.md) 関数によって生成される省略形の月名と同じものです。 日付 *dd* の最初の文字は、値が 10 未満の場合は空白になります。 このマクロは常に定義されます。

- `__FILE__` 現在のソース ファイルの名前。 `__FILE__` は文字の文字列リテラルに展開されます。 ファイルへの完全パスが表示されるようにするには、[ **`/FC`** (診断時のソース コード ファイルの完全パス)](../build/reference/fc-full-path-of-source-code-file-in-diagnostics.md) を使用します。 このマクロは常に定義されます。

- `__LINE__` 現在のソース ファイルの整数の行番号として定義されます。 `__LINE__` マクロの値は、`#line` ディレクティブを使用して変更できます。 このマクロは常に定義されます。

- `__STDC__` C としてコンパイルされるときにのみ、 [`/Za`](../build/reference/za-ze-disable-language-extensions.md)  コンパイラ オプションが指定されている場合に 1 として定義されます。 それ以外の場合は、定義されません。

- `__STDC_HOSTED__` 実装が必要な標準ライブラリ全体をサポートする *ホストされた実装* である場合、1 として定義されます。 それ以外の場合は、0 として定義されます。

- `__STDC_NO_ATOMICS__` 実装で任意の標準アトミックがサポートされない場合、1 として定義されます。 MSVC 実装では、C としてコンパイルされ、 [`/std`](../build/reference/std-specify-language-standard-version.md)  の C11 か C17 オプションが指定されているとき、1 として定義されます。

- `__STDC_NO_COMPLEX__` 実装で任意の標準複素数がサポートされない場合、1 として定義されます。 MSVC 実装では、C としてコンパイルされ、 [`/std`](../build/reference/std-specify-language-standard-version.md)  の C11 か C17 オプションが指定されているとき、1 として定義されます。

- `__STDC_NO_THREADS__` 実装で任意の標準スレッドがサポートされない場合、1 として定義されます。 MSVC 実装では、C としてコンパイルされ、 [`/std`](../build/reference/std-specify-language-standard-version.md)  の C11 か C17 オプションが指定されているとき、1 として定義されます。

- `__STDC_NO_VLA__` 実装で任意の標準可変長配列がサポートされない場合、1 として定義されます。 MSVC 実装では、C としてコンパイルされ、 [`/std`](../build/reference/std-specify-language-standard-version.md)  の C11 か C17 オプションが指定されているとき、1 として定義されます。

- `__STDC_VERSION__` C としてコンパイルされ、 **`/std`** の C11 か C17 オプションが指定されているとき、定義されます。  [`/std:c11`](../build/reference/std-specify-language-standard-version.md)  の場合は `201112L` に、 [`/std:c17` ](../build/reference/std-specify-language-standard-version.md) の場合は `201710L` に展開されます。

- `__STDCPP_THREADS__` プログラムが複数の実行スレッドを持つことができ、C++ としてコンパイルされる場合にのみ、1 として定義されます。 それ以外の場合は、定義されません。

- `__TIME__` 前処理された翻訳単位の翻訳時刻。 時刻は *hh: mm: ss* 形式の文字の文字列リテラルで、CRT [asctime](../c-runtime-library/reference/asctime-wasctime.md) 関数から返される時刻と同じものです。 このマクロは常に定義されます。

## <a name="microsoft-specific-predefined-macros"></a>Microsoft 固有の定義済みマクロ

MSVC では、次の定義済みマクロがサポートされます。

- `__ATOM__`  [`/favor:ATOM`](../build/reference/favor-optimize-for-architecture-specifics.md)  コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX__` [`/arch:AVX`](../build/reference/arch-x86.md)、[`/arch:AVX2`](../build/reference/arch-x86.md)、または [`/arch:AVX512`](../build/reference/arch-x86.md) コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX2__`  [`/arch:AVX2`](../build/reference/arch-x86.md)  または  [`/arch:AVX512` ](../build/reference/arch-x86.md) コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX512BW__`  [`/arch:AVX512`](../build/reference/arch-x86.md)  コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX512CD__`  [`/arch:AVX512`](../build/reference/arch-x86.md)  コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX512DQ__`  [`/arch:AVX512`](../build/reference/arch-x86.md)  コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX512F__`  [`/arch:AVX512`](../build/reference/arch-x86.md)  コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__AVX512VL__`  [`/arch:AVX512`](../build/reference/arch-x86.md)  コンパイラ オプションが設定され、コンパイラ ターゲットが x86 または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_CHAR_UNSIGNED` 既定の **`char`** 型が unsigned の場合、1 として定義されます。 この値は、[ **`/J`** (既定の char 型が unsigned)](../build/reference/j-default-char-type-is-unsigned.md) コンパイラ オプションが設定されている場合に定義されます。 それ以外の場合は、定義されません。

- `__CLR_VER` アプリのコンパイルに使用される共通言語ランタイム (CLR) のバージョンを表す整数リテラルとして定義されます。 値は `Mmmbbbbb` の形式でエンコードされます。`M` はランタイムのメジャー バージョン、`mm` はランタイムのマイナー バージョン、`bbbbb` はビルド番号です。 `__CLR_VER` は、 [`/clr`](../build/reference/clr-common-language-runtime-compilation.md)  コンパイラ オプションが設定されている場合に定義されます。 それ以外の場合は、定義されません。

    ```cpp
    // clr_ver.cpp
    // compile with: /clr
    using namespace System;
    int main() {
       Console::WriteLine(__CLR_VER);
    }
    ```

- `_CONTROL_FLOW_GUARD` [ **`/guard:cf`** (制御フロー ガードを有効にする)](../build/reference/guard-enable-control-flow-guard.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__COUNTER__` 0 から始まる整数リテラルに展開されます。 ソース ファイルで使用されるか、ソース ファイルのヘッダーに追加されるたびに、値が 1 ずつ増えます。 `__COUNTER__` にはプリコンパイル済みヘッダーを使用するときのその状態が記憶されます。 このマクロは常に定義されます。

  この例では、`__COUNTER__` を使用して、同じ型の 3 つの異なるオブジェクトに一意の識別子を割り当てます。 `exampleClass` コンストラクターは、パラメーターとして整数を受け取ります。 `main` で、アプリケーションは一意の識別子パラメーターとして `__COUNTER__` を使用して、`exampleClass` 型の 3 つのオブジェクトを宣言します。

    ```cpp
    // macro__COUNTER__.cpp
    // Demonstration of __COUNTER__, assigns unique identifiers to
    // different objects of the same type.
    // Compile by using: cl /EHsc /W4 macro__COUNTER__.cpp
    #include <stdio.h>

    class exampleClass {
        int m_nID;
    public:
        // initialize object with a read-only unique ID
        exampleClass(int nID) : m_nID(nID) {}
        int GetID(void) { return m_nID; }
    };

    int main()
    {
        // __COUNTER__ is initially defined as 0
        exampleClass e1(__COUNTER__);

        // On the second reference, __COUNTER__ is now defined as 1
        exampleClass e2(__COUNTER__);

        // __COUNTER__ is now defined as 2
        exampleClass e3(__COUNTER__);

        printf("e1 ID: %i\n", e1.GetID());
        printf("e2 ID: %i\n", e2.GetID());
        printf("e3 ID: %i\n", e3.GetID());

        // Output
        // ------------------------------
        // e1 ID: 0
        // e2 ID: 1
        // e3 ID: 2

        return 0;
    }
    ```

- `__cplusplus_cli` C++ としてコンパイルされ、 [`/clr`](../build/reference/clr-common-language-runtime-compilation.md)  コンパイラ オプションが設定されている場合、整数リテラル値 200406 として定義されます。 それ以外の場合は、定義されません。 `__cplusplus_cli`は定義される場合、翻訳単位全体で有効になります。

    ```cpp
    // cplusplus_cli.cpp
    // compile by using /clr
    #include "stdio.h"
    int main() {
       #ifdef __cplusplus_cli
          printf("%d\n", __cplusplus_cli);
       #else
          printf("not defined\n");
       #endif
    }
    ```

- `__cplusplus_winrt` C++ としてコンパイルされ、[ **`/ZW`** (Windows ランタイムのコンパイル)](../build/reference/zw-windows-runtime-compilation.md) コンパイラ オプションが設定されている場合、整数リテラル値 201009 として定義されます。 それ以外の場合は、定義されません。

- `_CPPRTTI` [ **`/GR`** (ランタイム型情報の有効化)](../build/reference/gr-enable-run-time-type-information.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_CPPUNWIND` [ **`/GX`** (例外処理の有効化)](../build/reference/gx-enable-exception-handling.md)、[ **`/clr`** (共通言語ランタイムのコンパイル)](../build/reference/clr-common-language-runtime-compilation.md)、または [ **`/EH`** (例外処理モデル)](../build/reference/eh-exception-handling-model.md) コンパイラ オプションが 1 つ以上設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_DEBUG` [`/LDd`](../build/reference/md-mt-ld-use-run-time-library.md)、[`/MDd`](../build/reference/md-mt-ld-use-run-time-library.md)、または [`/MTd`](../build/reference/md-mt-ld-use-run-time-library.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_DLL`  [`/MD`](../build/reference/md-mt-ld-use-run-time-library.md)  または  [`/MDd` ](../build/reference/md-mt-ld-use-run-time-library.md) (マルチスレッド DLL) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__FUNCDNAME__` 外側の関数の[装飾名](../build/reference/decorated-names.md)を含む文字列リテラルとして定義されます。 このマクロは関数内でのみ定義されます。  [`/EP`](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md)  または  [`/P` ](../build/reference/p-preprocess-to-a-file.md) コンパイラ オプションを使用する場合、`__FUNCDNAME__` マクロは展開されません。

   この例では、`__FUNCDNAME__`、`__FUNCSIG__`、および `__FUNCTION__` マクロを使用して関数の情報を表示します。

   [!code-cpp[NVC_Predefined_Macros_Examples#1](../preprocessor/codesnippet/CPP/predefined-macros_1.cpp)]

- `__FUNCSIG__` 外側の関数のシグネチャを含む文字列リテラルとして定義されます。 このマクロは関数内でのみ定義されます。  [`/EP`](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md)  または  [`/P` ](../build/reference/p-preprocess-to-a-file.md) コンパイラ オプションを使用する場合、`__FUNCSIG__` マクロは展開されません。 64 ビット ターゲット用にコンパイルされた場合、既定の呼び出し規則は **`__cdecl`** です。 使用例については、`__FUNCDNAME__` マクロを参照してください。

- `__FUNCTION__` 外側の関数の非装飾名を含む文字列リテラルとして定義されます。 このマクロは関数内でのみ定義されます。  [`/EP`](../build/reference/ep-preprocess-to-stdout-without-hash-line-directives.md)  または  [`/P` ](../build/reference/p-preprocess-to-a-file.md) コンパイラ オプションを使用する場合、`__FUNCTION__` マクロは展開されません。 使用例については、`__FUNCDNAME__` マクロを参照してください。

- `_INTEGRAL_MAX_BITS` 整数リテラル値 64 として定義されます。これは、非ベクター整数型の最大サイズ (ビット単位) です。 このマクロは常に定義されます。

   ```cpp
   // integral_max_bits.cpp
   #include <stdio.h>
   int main() {
      printf("%d\n", _INTEGRAL_MAX_BITS);
   }
   ```

- `__INTELLISENSE__` IntelliSense コンパイラから Visual Studio IDE に渡されるときに、1 として定義されます。 それ以外の場合は、定義されません。 このマクロを使用して、IntelliSense コンパイラで認識されないコードを保護したり、ビルドと IntelliSense コンパイラを切り替えるために使用したりできます。 詳細については、「[Troubleshooting Tips for IntelliSense Slowness](https://devblogs.microsoft.com/cppblog/troubleshooting-tips-for-intellisense-slowness/)」 (IntelliSense のパフォーマンス低下のトラブルシューティングのヒント) を参照してください。

- `_ISO_VOLATILE`  [`/volatile:iso`](../build/reference/volatile-volatile-keyword-interpretation.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_KERNEL_MODE` [ **`/kernel`** (カーネル モード バイナリの作成)](../build/reference/kernel-create-kernel-mode-binary.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_AMD64` x64 プロセッサをターゲットとするコンパイルの場合、整数リテラル値 100 として定義されます。 それ以外の場合は、定義されません。

- `_M_ARM` ARM プロセッサをターゲットとするコンパイルの場合、整数リテラル値 7 として定義されます。 それ以外の場合は、定義されません。

- `_M_ARM_ARMV7VE` ARM プロセッサをターゲットとするコンパイルに対して  [`/arch:ARMv7VE`](../build/reference/arch-arm.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_ARM_FP` ARM プロセッサ ターゲットに対してどの  [`/arch`](../build/reference/arch-arm.md)  コンパイラ オプションが設定されたかを示す整数リテラル値として定義されます。 それ以外の場合は、定義されません。

  - **`/arch`** ARM オプションが指定されていない場合は 30 から 39 の範囲の値。ARM の既定のアーキテクチャ (`VFPv3`) が設定されていることを示します。

  - **`/arch:VFPv4`** が設定されている場合は、40 から 49 の範囲の値。

  - 詳細については、[ **`/arch`** (ARM)](../build/reference/arch-arm.md) を参照してください。

- `_M_ARM64` 64 ビットの ARM プロセッサがターゲットのコンパイルの場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_CEE` [ **`/clr`** (共通言語ランタイムのコンパイル)](../build/reference/clr-common-language-runtime-compilation.md) コンパイラ オプションのいずれかが設定されている場合、001 として定義されます。 それ以外の場合は、定義されません。

- `_M_CEE_PURE` Visual Studio 2015 以降、非推奨となりました。  [`/clr:pure`](../build/reference/clr-common-language-runtime-compilation.md)  コンパイラ オプションが設定されている場合、001 として定義されます。 それ以外の場合は、定義されません。

- `_M_CEE_SAFE` Visual Studio 2015 以降、非推奨となりました。  [`/clr:safe`](../build/reference/clr-common-language-runtime-compilation.md)  コンパイラ オプションが設定されている場合、001 として定義されます。 それ以外の場合は、定義されません。

- `_M_FP_EXCEPT`  [`/fp:except`](../build/reference/fp-specify-floating-point-behavior.md)  または  [`/fp:strict` ](../build/reference/fp-specify-floating-point-behavior.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_FP_FAST`  [`/fp:fast`](../build/reference/fp-specify-floating-point-behavior.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_FP_PRECISE`  [`/fp:precise`](../build/reference/fp-specify-floating-point-behavior.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_FP_STRICT`  [`/fp:strict`](../build/reference/fp-specify-floating-point-behavior.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_M_IX86` x86 プロセッサをターゲットとするコンパイルの場合、整数リテラル値 600 として定義されます。 このマクロは、x64 または ARM コンパイル ターゲットに対しては定義されません。

- `_M_IX86_FP` 設定された  [`/arch`](../build/reference/arch-arm.md)  コンパイラ オプション、または既定値を示す整数リテラル値として定義されます。 このマクロは、コンパイル ターゲットが x86 プロセッサの場合に常に定義されます。 それ以外の場合は、定義されません。 定義される場合、値は次のとおりです。

  - `/arch:IA32` コンパイラ オプションが設定されている場合、0。

  - `/arch:SSE` コンパイラ オプションが設定されている場合、1。

  - `/arch:SSE2`、`/arch:AVX`、`/arch:AVX2`、または `/arch:AVX512` コンパイラ オプションが設定されている場合、2。 この値は、`/arch` コンパイラ オプションが指定されていない場合の既定値です。 `/arch:AVX` が指定されている場合、マクロ `__AVX__` も定義されます。 `/arch:AVX2` が指定されている場合、`__AVX__` と `__AVX2__` の両方も定義されます。 `/arch:AVX512` が指定されている場合、`__AVX__`、`__AVX2__`、`__AVX512BW__`、`__AVX512CD__`、`__AVX512DQ__`、`__AVX512F__`、`__AVX512VL__` も定義されます。

  - 詳細については、[ **`/arch`** (x86)](../build/reference/arch-x86.md) を参照してください。

- `_M_X64` x64 プロセッサをターゲットとするコンパイルの場合、整数リテラル値 100 として定義されます。 それ以外の場合は、定義されません。

- `_MANAGED`  [`/clr`](../build/reference/clr-common-language-runtime-compilation.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_MSC_BUILD` コンパイラのバージョン番号のリビジョン番号要素を含む整数リテラルとして定義されます。 リビジョン番号は、ピリオド区切りのバージョン番号の 4 番目の要素です。 たとえば、Microsoft C/C++ コンパイラのバージョン番号が 15.00.20706.01 の場合、`_MSC_BUILD` マクロは 1 に評価されます。 このマクロは常に定義されます。

- `_MSC_EXTENSIONS` 既定でオンの [ **`/Ze`** (言語拡張機能を有効にする)](../build/reference/za-ze-disable-language-extensions.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_MSC_FULL_VER` コンパイラのバージョン番号のメジャー、マイナー、およびビルド番号要素をエンコードする整数リテラルとして定義されます。 メジャー番号はピリオド区切りのバージョン番号の最初の要素、マイナー番号は 2 番目の要素、ビルド番号は 3 番目の要素です。 たとえば、Microsoft C/C++ コンパイラのバージョン番号が 15.00.20706.01 の場合、`_MSC_FULL_VER` マクロは 150020706 に評価されます。 コマンド ラインで「`cl /?`」と入力すると、コンパイラのバージョン番号が表示されます。 このマクロは常に定義されます。

- `_MSC_VER` コンパイラのバージョン番号のメジャーおよびマイナー番号要素をエンコードする整数リテラルとして定義されます。 メジャー番号はピリオド区切りのバージョン番号の最初の要素、マイナー番号は 2 番目の要素です。 たとえば、Microsoft C/C++ コンパイラのバージョン番号が 17.00.51106.1 の場合、`_MSC_VER` マクロは 1700 に評価されます。 コマンド ラインで「`cl /?`」と入力すると、コンパイラのバージョン番号が表示されます。 このマクロは常に定義されます。

   | Visual Studio のバージョン | `_MSC_VER` |
   |--|--|
   | Visual Studio 6.0 | 1200 |
   | Visual Studio .NET 2002 (7.0) | 1300 |
   | Visual Studio .NET 2003 (7.1) | 1310 |
   | Visual Studio 2005 (8.0) | 1400 |
   | Visual Studio 2008 (9.0) | 1500 |
   | Visual Studio 2010 (10.0) | 1600 |
   | Visual Studio 2012 (11.0) | 1,700 |
   | Visual Studio 2013 (12.0) | 1800 |
   | Visual Studio 2015 (14.0) | 1900 |
   | Visual Studio 2017 RTW (15.0) | 1910 |
   | Visual Studio 2017 バージョン 15.3 | 1911 |
   | Visual Studio 2017 バージョン 15.5 | 1912 |
   | Visual Studio 2017 バージョン 15.6 | 1913 |
   | Visual Studio 2017 バージョン 15.7 | 1914 |
   | Visual Studio 2017 バージョン 15.8 | 1915 |
   | Visual Studio 2017 バージョン 15.9 | 1916 |
   | Visual Studio 2019 RTW (16.0) | 1920 |
   | Visual Studio 2019 バージョン 16.1 | 1921 |
   | Visual Studio 2019 バージョン 16.2 | 1922 |
   | Visual Studio 2019 バージョン 16.3 | 1923 |
   | Visual Studio 2019 バージョン 16.4 | 1924 |
   | Visual Studio 2019 バージョン 16.5 | 1925 |
   | Visual Studio 2019 バージョン 16.6 | 1926 |
   | Visual Studio 2019 バージョン 16.7 | 1927 |
   | Visual Studio 2019 バージョン 16.8、16.9 | 1928 |
   | Visual Studio 2019 バージョン 16.10 Preview | 1929 |

   特定のバージョン以降の Visual Studio でコンパイラのリリースまたは更新プログラムをテストするには、`>=` 演算子を使用します。 条件付きディレクティブで使用して、その既知のバージョンに対して `_MSC_VER` を比較することができます。 比較対象として相互に排他的な複数のバージョンがある場合は、バージョン番号の降順で比較を行います。 たとえば、このコードでは Visual Studio 2017 以降でリリースされたコンパイラがチェックされます。 次に、Visual Studio 2015 以降でリリースされたコンパイラがチェックされます。 その後、Visual Studio 2015 より前にリリースされたすべてのコンパイラがチェックされます。

   ```cpp
   #if _MSC_VER >= 1910
   // . . .
   #elif _MSC_VER >= 1900
   // . . .
   #else
   // . . .
   #endif
   ```

   メジャー番号とマイナー数値を共有するコンパイラのバージョンをテストするには、`_MSC_FULL_VER` でメジャー番号、マイナー番号、およびビルド番号を使用して比較します。 Visual Studio 2019 バージョン 16.9 のコンパイラでは、`_MSC_FULL_VER` の値が 192829500 以上になります。

   詳細については、Microsoft C++ チームのブログ「[Visual C++ Compiler Version](https://devblogs.microsoft.com/cppblog/visual-c-compiler-version/)」 (Visual C++ コンパイラのバージョン) を参照してください。

- `_MSVC_LANG` コンパイラのターゲットである C++ 言語標準を指定する整数リテラルとして定義されます。 これは、C++ としてコンパイルされたコードでのみ設定されます。 マクロは、既定では、または  [`/std:c++14`](../build/reference/std-specify-language-standard-version.md)  コンパイラ オプションが指定されている場合は、整数リテラル値 201402L です。  [`/std:c++17`](../build/reference/std-specify-language-standard-version.md)  コンパイラ オプションが指定されている場合は、マクロは 201703L に設定されます。  [`/std:c++latest`](../build/reference/std-specify-language-standard-version.md)  オプションが指定されている場合は、より大きい、未指定の値に設定されます。 それ以外の場合は、マクロは定義されません。 `_MSVC_LANG` マクロと [ **`/std`** (言語の標準バージョンの指定)](../build/reference/std-specify-language-standard-version.md) コンパイラ オプションは、Visual Studio 2015 Update 3 以降で使用できます。

- `__MSVC_RUNTIME_CHECKS`  [`/RTC`](../build/reference/rtc-run-time-error-checks.md)  コンパイラ オプションのいずれかが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_MSVC_TRADITIONAL`:
    - Visual Studio 2017 バージョン15.8 以降で利用可能:プリプロセッサ準拠モード [`/experimental:preprocessor`](../build/reference/experimental-preprocessor.md) コンパイラ オプションが設定されている場合、0 として定義されます。 既定では、または  [`/experimental:preprocessor-`](../build/reference/experimental-preprocessor.md)  コンパイラ オプションが設定されている場合は、1 として定義されます。これは、従来のプリプロセッサが使用されていることを示します。
    - Visual Studio 2019 バージョン16.5 以降で利用可能:プリプロセッサ準拠モード [`/Zc:preprocessor`](../build/reference/zc-preprocessor.md) コンパイラ オプションが設定されている場合、0 として定義されます。 既定では、または `/Zc:preprocessor-` コンパイラ オプションが設定されている場合は、1 として定義されます。これは、従来のプリプロセッサが使用されていることを示します (基本的に、`/Zc:preprocessor` は非推奨の `/experimental:preprocessor` を置き換えます)。

   ```cpp
   #if defined(_MSVC_TRADITIONAL) && _MSVC_TRADITIONAL
   // Logic using the traditional preprocessor
   #else
   // Logic using cross-platform compatible preprocessor
   #endif
   ```

- `_MT` [ **`/MD`** 、 **`/MDd`** (マルチスレッド DLL)、](../build/reference/md-mt-ld-use-run-time-library.md)、[ **`/MT`** 、 **`/MTd`** (マルチスレッド)](../build/reference/md-mt-ld-use-run-time-library.md) のいずれかが指定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_NATIVE_WCHAR_T_DEFINED`  [`/Zc:wchar_t`](../build/reference/zc-wchar-t-wchar-t-is-native-type.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_OPENMP` [ **`/openmp`** (OpenMP 2.0 サポートの有効化)](../build/reference/openmp-enable-openmp-2-0-support.md) コンパイラ オプションが設定されている場合、整数リテラル 200203 として定義されます。 この値は、MSVC によって実装される OpenMP 仕様の日付を表します。 それ以外の場合は、定義されません。

   ```cpp
   // _OPENMP_dir.cpp
   // compile with: /openmp
   #include <stdio.h>
   int main() {
      printf("%d\n", _OPENMP);
   }
   ```

- `_PREFAST_`  [`/analyze`](../build/reference/analyze-code-analysis.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `__TIMESTAMP__` 現在のソース ファイルが最後に変更された日時を格納する文字列リテラルとして定義されます。CRT [`asctime`](../c-runtime-library/reference/asctime-wasctime.md) 関数から返される省略形の固定長の形式です (例: `Fri 19 Aug 13:32:58 2016`)。 このマクロは常に定義されます。

- `_VC_NODEFAULTLIB` [ **`/Zl`** (既定のライブラリ名の省略)](../build/reference/zl-omit-default-library-name.md) コンパイラ オプションが設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_WCHAR_T_DEFINED` 既定の  [`/Zc:wchar_t`](../build/reference/zc-wchar-t-wchar-t-is-native-type.md)  コンパイラ オプションが設定されている場合、1 として定義されます。 `_WCHAR_T_DEFINED` マクロは定義されますが、 **`/Zc:wchar_t-`** コンパイラ オプションが設定されていて、 **`wchar_t`** がプロジェクトに含まれるシステム ヘッダー ファイルで定義されている場合は、値がありません。 それ以外の場合は、定義されません。

- `_WIN32` コンパイル ターゲットが 32 ビットの ARM、64 ビットの ARM、x86、または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_WIN64` コンパイル ターゲットが 64 ビットの ARM または x64 の場合、1 として定義されます。 それ以外の場合は、定義されません。

- `_WINRT_DLL` C++ としてコンパイルされ、[ **`/ZW`** (Windows ランタイム コンパイル)](../build/reference/zw-windows-runtime-compilation.md) および [ **`/LD`** または **`/LDd`**](../build/reference/md-mt-ld-use-run-time-library.md) コンパイラ オプションの両方が設定されている場合、1 として定義されます。 それ以外の場合は、定義されません。

ATL または MFC ライブラリのバージョンを識別するプリプロセッサ マクロは、コンパイラによって事前に定義されません。 ATL および MFC ライブラリ ヘッダーにより、これらのバージョン マクロは内部で定義されます。 必須のヘッダーが含まれる前に作成されたプリプロセッサ ディレクティブには定義されません。

- `_ATL_VER` ATL バージョン番号をエンコードする整数リテラルとして、\<atldef.h> で定義されます。

- `_MFC_VER` MFC バージョン番号をエンコードする整数リテラルとして、\<afxver_.h> で定義されます。

## <a name="see-also"></a>関連項目

[マクロ (C/C++)](../preprocessor/macros-c-cpp.md)<br/>
[プリプロセッサ演算子](../preprocessor/preprocessor-operators.md)<br/>
[プリプロセッサ ディレクティブ](../preprocessor/preprocessor-directives.md)
