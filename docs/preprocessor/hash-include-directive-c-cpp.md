---
description: '詳細情報: #include ディレクティブ (C/c + +)'
title: '#include ディレクティブ (C/C++)'
ms.date: 01/19/2021
f1_keywords:
- '#include'
helpviewer_keywords:
- preprocessor, directives
- '#include directive'
- include directive (#include)
ms.openlocfilehash: 4ba9b07b77d919e8587fc392518d268b935e0c46
ms.sourcegitcommit: a26a66a3cf479e0e827d549a9b850fad99b108d1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/22/2021
ms.locfileid: "98713624"
---
# <a name="include-directive-cc"></a>`#include` ディレクティブ (C/c + +)

指定されたファイルの内容をディレクティブがある位置に含めるようにプリプロセッサに指示します。

## <a name="syntax"></a>構文

> **`#include "`***パス-仕様***`"`**\
> **`#include <`***パス-仕様***`>`**

## <a name="remarks"></a>解説

定数とマクロの定義を *インクルードファイル* ( *ヘッダーファイル* とも呼ばれます) に編成し、ディレクティブを使用して **`#include`** 任意のソースファイルに追加することができます。 インクルード ファイルは外部変数や複合データ型の宣言を組み込むためにも便利です。 それらの型の定義と名前付けは、その目的で作成したインクルード ファイル内で一度だけ行います。

*パス仕様* は、必要に応じてディレクトリ指定を前に付けることができるファイル名です。 そのファイル名は既存のファイルの名前であることが必要です。 *パス仕様* の構文は、プログラムがコンパイルされるオペレーティングシステムによって異なります。

を使用してコンパイルされた C++ アプリケーションでアセンブリを参照する方法の詳細について [`/clr`](../build/reference/clr-common-language-runtime-compilation.md) は、「 [ `#using` ディレクティブ](../preprocessor/hash-using-directive-cpp.md)」を参照してください。

どちらの構文形式でも、 **`#include`** ディレクティブは指定したファイルの内容全体に置き換えられます。 2つの形式の違いは、パスの指定が不完全な場合にプリプロセッサが検索するパスの順序です。 次の表に 2 つの構文形式間の違いを示します。

| 構文形式 | アクション |
|--|--|
| 引用符形式 | プリプロセッサはインクルード ファイルを次の順序で検索します。<br/><br/> 1) は、ステートメントを含むファイルと同じディレクトリに **`#include`** あります。<br/><br/> 2) 現在開いているインクルードファイルのディレクトリ内で、開いた順序と逆の順序で表示されます。 ディレクトリの検索は親インクルード ファイルのディレクトリから始まり、上方向へ移動して親の親インクルード ファイルのディレクトリへと続きます。<br/><br/> 3) 各コンパイラオプションで指定されたパスに沿って **`/I`** 。<br/><br/> 4) 環境変数によって指定されたパスに沿って `INCLUDE` います。 |
| 山かっこ形式 | プリプロセッサはインクルード ファイルを次の順序で検索します。<br/><br/> 1) は、各コンパイラオプションで指定されたパスに沿って **`/I`** います。<br/><br/> 2) コンパイルは、コマンドラインで環境変数で指定されたパスに沿って行われ `INCLUDE` ます。 |

プリプロセッサは指定された名前のファイルが見つかるとすぐに検索を停止します。 二重引用符 () の間にインクルードファイルのあいまいでない完全なパスを指定する `" "` と、プリプロセッサはそのパスの指定のみを検索し、標準ディレクトリを無視します。

二重引用符で囲まれたファイル名が不完全なパス指定の場合、プリプロセッサはまず *親* ファイルのディレクトリを検索します。 親ファイルは、ディレクティブを含むファイルです **`#include`** 。 たとえば、file1 という名前のファイルを *file1* という名前の *ファイルに含める* と、 *file1* は親ファイルになります。

インクルードファイルは *入れ子* にすることができます。ディレクティブは、 **`#include`** 別のディレクティブによって名前が付けられたファイルに記述でき **`#include`** ます。 たとえば、 *file2* には *file3* を含めることができます。 この場合、 *file1* は依然として *file2* の親になりますが、 *file3* の祖父母になります。

インクルードファイルが入れ子になっており、コマンドラインでコンパイルが行われる場合、ディレクトリ検索は親ファイルのディレクトリから開始されます。 次に、すべての親ファイルのディレクトリを処理します。 したがって、検索は現在処理中のソースが含まれるディレクトリに対して相対的に開始されます。 ファイルが見つからない場合、検索は[ `/I` (追加のインクルードディレクトリ)](../build/reference/i-additional-include-directories.md)コンパイラオプションで指定されたディレクトリに移動します。 最後に、環境変数によって指定されたディレクトリが `INCLUDE` 検索されます。

Visual Studio 開発環境で `INCLUDE` は、環境変数は無視されます。 インクルードディレクトリのプロジェクトプロパティで指定された値が代わりに使用されます。 Visual Studio でインクルードディレクトリを設定する方法の詳細については、「 [インクルードディレクトリ](../build/reference/vcpp-directories-property-page.md#directory-types) 」および「 [追加のインクルードディレクトリ](../build/reference/c-cpp-prop-page.md#additional-include-directories)」を参照してください。

次の例では、山かっこ形式を使用したファイルのインクルードを示します。

```C
#include <stdio.h>
```

この例では、という名前のファイルの内容 *`stdio.h`* をソースプログラムに追加します。 山かっこを使用すると、プリプロセッサは、 `INCLUDE` *`stdio.h`* コンパイラオプションで指定されたディレクトリを検索した後、の環境変数で指定されたディレクトリを検索し **`/I`** ます。

次の例では、引用符形式を使用したファイルのインクルードを示します。

```C
#include "defs.h"
```

この例では、によって指定されたファイルの内容を *`defs.h`* ソースプログラムに追加します。 引用符形式では、プリプロセッサは、親のソース ファイルがあるディレクトリをまず検索します。

インクルード ファイルの入れ子は最大 10 レベルまで可能です。 入れ子になったの処理が完了すると、 **`#include`** プリプロセッサは、外側の親インクルードファイルを元のソースファイルに挿入し続けます。

**Microsoft 固有の仕様**

プリプロセッサは、インクルードするソースファイルを検索するために、コンパイラオプションで指定されたディレクトリを最初に検索し **`/I`** ます。 オプションが存在しない場合、 **`/I`** または失敗した場合、プリプロセッサは環境変数を使用して、 `INCLUDE` 山かっこで囲まれたインクルードファイルを検索します。 `INCLUDE`環境変数と **`/I`** コンパイラオプションには、セミコロン () で区切られた複数のパスを含めることができ **`;`** ます。 オプションの一部として、または環境変数内で複数のディレクトリが表示される場合は、プリプロセッサによって、 **`/I`** `INCLUDE` 出現順に検索されます。

たとえば、次のコマンドがあるとします。

```cmd
CL /ID:\msvc\include myprog.c
```

プリプロセッサによって、ディレクトリ内のなど *`D:\msvc\include\`* のインクルードファイルが検索され *`stdio.h`* ます。 また、次のコマンドがあるとします。

```cmd
SET INCLUDE=D:\msvc\include
CL myprog.c
```

このコマンドでも同じ結果になります。 いずれの検索も失敗した場合は、致命的なコンパイル エラーが発生します。

コロンを含むパス (たとえば) を含むインクルードファイルに対してファイル名が完全に指定されている場合 *`F:\MSVC\SPECIAL\INCL\TEST.H`* 、プリプロセッサはパスに従います。

として指定されているインクルードファイルの場合 `#include "path-spec"` 、ディレクトリ検索は親ファイルのディレクトリから開始され、親ファイルのディレクトリに移動します。 つまり、検索は処理中のソースファイルが格納されているディレクトリに対して相対的に開始されます。 親の親ファイルが存在せず、ファイルがまだ見つからない場合は、ファイル名が山かっこで囲まれているかのように検索が続行されます。

**Microsoft 固有の仕様の終了**

## <a name="see-also"></a>関連項目

[プリプロセッサディレクティブ](../preprocessor/preprocessor-directives.md)\
[`/I` (追加のインクルードディレクトリ)](../build/reference/i-additional-include-directories.md)
